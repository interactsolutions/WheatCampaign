<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>INTERACT Campaign Dashboard</title>

  <meta name="description" content="Interactive campaign dashboard: sessions, reach, adoption funnel, and field media." />
  <meta property="og:title" content="INTERACT Campaign Dashboard" />
  <meta property="og:description" content="Field activation performance, insights, and media — filter by district and session." />
  <meta property="og:image" content="assets/Buctril.jpg" />

  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
  <link rel="preconnect" href="https://unpkg.com" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="assets/Bayer.png" />
</head>
<body>
  <div class="bg">
    <video id="bgVideo" class="bg-video" autoplay muted loop playsinline>
      <source id="bgVideoSrc" src="assets/bg.mp4" type="video/mp4" />
    </video>
    <div class="bg-overlay"></div>
  </div>

  <header class="topbar">
    <div class="topbar-inner">
      <div class="brandstrip" id="headerBrandStrip" aria-label="Brand videos"></div>

      <div class="headline">
        <div class="headline-left">
          <div class="badge">INTERACT</div>
          <h1 id="campaignTitle">Campaign Dashboard</h1>
          <p id="campaignSubtitle" class="subtitle">Insights, coverage and field media — built for teams, partners and the community.</p>
          <div class="meta">
            <span class="meta-item"><i class="fa-solid fa-calendar-days"></i> <span id="campaignDateRange">—</span></span>
            <span class="meta-item"><i class="fa-solid fa-location-dot"></i> <span id="campaignDistricts">—</span> districts</span>
            <span class="meta-item"><i class="fa-solid fa-users"></i> <span id="campaignFarmers">—</span> farmers</span>
          </div>
        </div>

        <div class="headline-right">
          <div class="campaign-picker">
            <label for="campaignSelect">Campaign</label>
            <select id="campaignSelect"></select>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="controls">
      <div class="control-row">
        <div class="control">
          <label for="districtFilter"><i class="fa-solid fa-city"></i> District</label>
          <select id="districtFilter"></select>
        </div>

        <div class="control">
          <label for="searchInput"><i class="fa-solid fa-magnifying-glass"></i> Search</label>
          <input id="searchInput" type="text" placeholder="Location, host, dealer, village…" />
        </div>

        <div class="control">
          <label><i class="fa-solid fa-calendar"></i> Date range</label>
          <div class="date-range">
            <input id="dateFrom" type="date" />
            <span>to</span>
            <input id="dateTo" type="date" />
          </div>
        </div>

        <div class="control actions">
          <button id="applyFilters" class="btn primary"><i class="fa-solid fa-filter"></i> Apply</button>
          <button id="resetFilters" class="btn ghost"><i class="fa-solid fa-rotate-left"></i> Reset</button>
          <button id="exportCsv" class="btn secondary"><i class="fa-solid fa-file-arrow-down"></i> Export</button>
        </div>
      </div>

      <div class="selection" id="selectionSummary">
        <div class="selection-left">
          <div class="selection-title"><i class="fa-solid fa-bullseye"></i> Current selection</div>
          <div class="selection-sub" id="selectionText">All districts • All dates</div>
        </div>
        <div class="selection-right">
          <div class="chip"><span class="chip-num" id="selSessions">—</span><span class="chip-label">Sessions</span></div>
          <div class="chip"><span class="chip-num" id="selFarmers">—</span><span class="chip-label">Farmers</span></div>
          <div class="chip"><span class="chip-num" id="selAcres">—</span><span class="chip-label">Acres</span></div>
          <div class="chip"><span class="chip-num" id="selScore">—</span><span class="chip-label">Avg Score</span></div>
        </div>
      </div>
    </section>

    <section class="insights">
      <div class="section-head">
        <h2>Campaign insights at a glance</h2>
        <p>Clear, comparable metrics for stakeholder decisions: awareness, intent, understanding, and coverage.</p>
      </div>

      <div class="donut-grid">
        <article class="donut-card">
          <div class="donut-top">
            <h3>Adoption intent</h3>
            <div class="donut-kpi" id="kpiDefinite">—%</div>
          </div>
          <canvas id="chartIntent" height="190"></canvas>
          <div class="donut-foot" id="legendIntent"></div>
        </article>

        <article class="donut-card">
          <div class="donut-top">
            <h3>Brand awareness</h3>
            <div class="donut-kpi" id="kpiAwareness">—%</div>
          </div>
          <canvas id="chartAwareness" height="190"></canvas>
          <div class="donut-foot" id="legendAwareness"></div>
        </article>

        <article class="donut-card">
          <div class="donut-top">
            <h3>Message understanding</h3>
            <div class="donut-kpi" id="kpiUnderstanding">—/3</div>
          </div>
          <canvas id="chartUnderstanding" height="190"></canvas>
          <div class="donut-foot small">
            Average understanding across 5 key messages (0–3 scale).
          </div>
        </article>

        <article class="donut-card">
          <div class="donut-top">
            <h3>Coverage by acres</h3>
            <div class="donut-kpi" id="kpiCoverage">—</div>
          </div>
          <canvas id="chartCoverage" height="190"></canvas>
          <div class="donut-foot" id="legendCoverage"></div>
        </article>
      </div>
    </section>

    <section class="map-sessions">
      <div class="map-wrap">
        <div class="section-head tight">
          <h2>Map view</h2>
          <p>Spots are shown by default. Tap a spot to open the session profile with people, performance and media.</p>
        </div>
        <div class="map-card">
          <div id="campaignMap" class="map"></div>
          <div class="map-stats" id="mapStats"><i class="fa-solid fa-location-dot"></i> Loading map…</div>
          <div class="map-actions">
            <button id="fitMap" class="btn primary small"><i class="fa-solid fa-maximize"></i> Fit</button>
            <button id="resetMap" class="btn ghost small"><i class="fa-solid fa-globe"></i> Reset</button>
          </div>
        </div>
      </div>

      <aside class="drawer" id="sessionDrawer" aria-label="Session details" aria-hidden="true">
        <div class="drawer-head">
          <div>
            <div class="drawer-kicker" id="drawerKicker">Session</div>
            <div class="drawer-title" id="drawerTitle">—</div>
            <div class="drawer-sub" id="drawerSub">—</div>
          </div>
          <button class="iconbtn" id="drawerClose" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
        </div>

        <div class="drawer-body">
          <div class="drawer-grid">
            <div class="kv">
              <div class="kv-label">Host</div>
              <div class="kv-value" id="drawerHost">—</div>
            </div>
            <div class="kv">
              <div class="kv-label">Sales rep</div>
              <div class="kv-value" id="drawerSales">—</div>
            </div>
            <div class="kv">
              <div class="kv-label">Dealer</div>
              <div class="kv-value" id="drawerDealer">—</div>
            </div>
            <div class="kv">
              <div class="kv-label">Competitors mentioned</div>
              <div class="kv-value" id="drawerCompetitors">—</div>
            </div>
          </div>

          <div class="drawer-metrics">
            <div class="metric">
              <div class="metric-num" id="drawerFarmers">—</div>
              <div class="metric-label">Farmers</div>
            </div>
            <div class="metric">
              <div class="metric-num" id="drawerAcres">—</div>
              <div class="metric-label">Wheat acres</div>
            </div>
            <div class="metric">
              <div class="metric-num" id="drawerDefinite">—%</div>
              <div class="metric-label">Definite</div>
            </div>
            <div class="metric">
              <div class="metric-num" id="drawerScore">—</div>
              <div class="metric-label">Session score</div>
            </div>
          </div>

          <div class="drawer-insights">
            <div class="insight">
              <div class="insight-label">Top reason to use</div>
              <div class="insight-value" id="drawerReasonUse">—</div>
            </div>
            <div class="insight">
              <div class="insight-label">Top reason not to use</div>
              <div class="insight-value" id="drawerReasonNo">—</div>
            </div>
          </div>

          <div class="drawer-media">
            <div class="drawer-media-head">
              <h3>Session media</h3>
              <button class="btn ghost small" id="drawerShareAll"><i class="fa-solid fa-share-nodes"></i> Share</button>
            </div>
            <div id="drawerMediaStrip" class="media-strip"></div>
          </div>
        </div>
      </aside>
    </section>

    <section class="sessions">
      <div class="section-head">
        <h2>Sessions</h2>
        <p>Filter by district and date to view exact sessions and their outcomes.</p>
      </div>

      <div id="sessionsList" class="sessions-list"></div>
      <div class="pager">
        <button id="prevPage" class="btn ghost" disabled><i class="fa-solid fa-chevron-left"></i> Prev</button>
        <div class="pager-info">Page <span id="pageNow">1</span> / <span id="pageTotal">1</span></div>
        <button id="nextPage" class="btn ghost" disabled>Next <i class="fa-solid fa-chevron-right"></i></button>
      </div>
    </section>

    <section class="gallery">
      <div class="section-head">
        <h2>Media wall</h2>
        <p>Animated cards combine each session’s photo and video. Only items from <code>assets/gallery/</code> are shown.</p>
      </div>

      <div class="gallery-stats">
        <div class="stat"><span id="galSessions">—</span><small>Sessions shown</small></div>
        <div class="stat"><span id="galImages">—</span><small>Images</small></div>
        <div class="stat"><span id="galVideos">—</span><small>Videos</small></div>
      </div>

      <div id="mediaWall" class="media-wall"></div>
    </section>

    <section class="feedback" id="feedback">
      <div class="section-head">
        <h2>Share feedback</h2>
        <p>Help us improve field activations. Provide your email or phone and send feedback to INTERACT.</p>
      </div>

      <div class="feedback-card">
        <form id="feedbackForm">
          <div class="form-grid">
            <div class="field">
              <label for="fbName">Name (optional)</label>
              <input id="fbName" type="text" placeholder="Your name" />
            </div>
            <div class="field">
              <label for="fbEmail">Email</label>
              <input id="fbEmail" type="email" placeholder="name@example.com" />
            </div>
            <div class="field">
              <label for="fbPhone">Phone</label>
              <input id="fbPhone" type="tel" placeholder="+92 3xx xxx xxxx" />
            </div>
            <div class="field full">
              <label for="fbMessage">Feedback</label>
              <textarea id="fbMessage" rows="5" placeholder="What worked well? What should we improve? Any observations from the field?"></textarea>
            </div>
          </div>

          <div class="form-actions">
            <div class="form-note">
              Send to <strong>interact@paksaf.com</strong> • Contact <strong>+92355223233</strong>
              <span id="fbError" class="error" role="alert" aria-live="polite"></span>
            </div>

            <div class="form-buttons">
              <button type="submit" class="btn primary">
                <i class="fa-solid fa-envelope"></i> Email feedback
              </button>
              <button type="button" id="fbWhatsApp" class="btn whatsapp">
                <i class="fa-brands fa-whatsapp"></i> WhatsApp feedback
              </button>
            </div>
          </div>
        </form>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-inner">
        <div class="footer-brand" id="footerBrandImages"></div>
        <div class="footer-meta">
          <div class="footer-title">Powered by INTERACT</div>
          <div class="footer-sub">Field intelligence dashboards for multi-campaign execution.</div>
          <div class="footer-links">
            <a href="#feedback"><i class="fa-solid fa-message"></i> Feedback</a>
            <a href="#" id="sharePage"><i class="fa-solid fa-share-nodes"></i> Share page</a>
            <a href="#" onclick="window.print(); return false;"><i class="fa-solid fa-print"></i> Print</a>
          </div>
        </div>
      </div>
    </footer>
  </main>

  <!-- Media Modal -->
  <div class="modal" id="mediaModal" aria-hidden="true">
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal-card" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div>
          <div class="modal-kicker" id="modalKicker">Media</div>
          <div class="modal-title" id="modalTitle">—</div>
        </div>
        <div class="modal-actions">
          <button class="btn ghost small" id="modalShare"><i class="fa-solid fa-share-nodes"></i> Share</button>
          <button class="iconbtn" id="modalClose" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
        </div>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
