<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Harvest Horizons — Buctril Activations Report</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" crossorigin></script>

  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js" crossorigin></script>

  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f1a2e;
      --panel2:#111f39;
      --text:#e7edf7;
      --muted:#9fb0ca;
      --border:rgba(255,255,255,.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
      --accent:#7dd3fc;
      --accent2:#86efac;
      --warn:#fbbf24;
      --bad:#fb7185;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1100px 600px at 15% 10%, rgba(125,211,252,.18), transparent 55%),
        radial-gradient(900px 600px at 85% 25%, rgba(134,239,172,.14), transparent 55%),
        linear-gradient(180deg, #070c15, var(--bg));
      overflow-x:hidden;
    }

    a{ color:inherit; }
    .muted{ color:var(--muted); }

    /* Thematic Sections */
    .theme-section { position: relative; min-height: 800px; padding: 40px; background: linear-gradient(to bottom, var(--panel), var(--panel2)); border-radius: var(--radius); margin-bottom: 40px; }
    .central-media { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60%; height: 60%; border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); }
    .central-media video, .central-media img { width: 100%; height: 100%; object-fit: cover; }
    .data-planet { position: absolute; width: 120px; height: 120px; background: rgba(134,239,172,.8); border-radius: 50%; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: bold; animation: orbit 30s linear infinite; box-shadow: 0 0 20px rgba(134,239,172,.5); }
    @keyframes orbit { 0% { transform: rotate(0deg) translateX(300px) rotate(0deg); } 100% { transform: rotate(360deg) translateX(300px) rotate(-360deg); } }
    .planet1 { animation-duration: 25s; animation-delay: 0s; }
    .planet2 { animation-duration: 35s; animation-delay: 5s; transform-origin: 50% 50%; }
    .planet3 { animation-duration: 40s; animation-delay: 10s; }
    /* Adjust radii via translateX in JS if needed */

    /* Filters Sidebar */
    .sidebar { position: sticky; top: 20px; background: var(--panel); padding: 20px; border-radius: var(--radius); }
    /* Map */
    #map { height: 400px; border-radius: var(--radius); }
    /* Gallery */
    #galleryGrid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
    /* Lightbox, etc. remain similar */
  </style>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <!-- Existing hero -->
    </header>

    <div class="layout">
      <aside class="sidebar">
        <!-- Existing filters, snapshot -->
      </aside>

      <main>
        <section class="theme-section" id="seed-awareness">
          <h2>Seed of Awareness</h2>
          <div class="central-media" id="awareness-media"></div>
          <div class="data-planet planet1">Farmers: <span id="awareness-farmers">—</span></div>
          <div class="data-planet planet2">Acres: <span id="awareness-acres">—</span></div>
          <div class="data-planet planet3">Awareness %: <span id="awareness-pct">—</span></div>
        </section>

        <section class="theme-section" id="growth-journey">
          <h2>Growth Journey</h2>
          <div class="central-media" id="journey-media"></div>
          <div class="data-planet planet1">Sessions: <span id="journey-sessions">—</span></div>
          <div class="data-planet planet2">Definite %: <span id="journey-def">—</span></div>
          <div id="map" class="data-planet planet3">Map Orbit</div> <!-- Embed map as orbiting element -->
        </section>

        <section class="theme-section" id="harvest-impact">
          <h2>Harvest Impact</h2>
          <div class="central-media" id="impact-media"></div>
          <div class="data-planet planet1">Clarity %: <span id="impact-clarity">—</span></div>
          <canvas id="chartIntent" class="data-planet planet2"></canvas>
        </section>

        <section class="theme-section" id="future-fields">
          <h2>Future Fields</h2>
          <div class="central-media" id="future-media"></div>
          <div class="data-planet planet1">Recommendations</div>
          <table id="tblSessions" class="data-planet planet2"></table> <!-- Cleaned table -->
          <button class="share-btn">Share Visual</button>
        </section>
      </main>
    </div>

    <!-- Existing lightbox, notice -->
  </div>

  <script src="data_processor.js"></script>
</body>
</html>
